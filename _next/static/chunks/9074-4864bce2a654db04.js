"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9074],{79074:function(n,t,e){e.d(t,{ft:function(){return tt},jF:function(){return ta},qg:function(){return tm},hb:function(){return ty},zo:function(){return tr},gw:function(){return te},A$:function(){return to},P6:function(){return tc},Xx:function(){return n9},hw:function(){return n6},H8:function(){return tn},U1:function(){return tD},BS:function(){return tv},Jj:function(){return tl},b6:function(){return ts},ZF:function(){return tu},QB:function(){return td},nT:function(){return tp}});var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D,k,h,b,S,w,U,g,Z,_,q,F,T=e(98788),A=e(70865),B=e(87394),$=e(45680),P=e(28401),I=e(12383),O=e(20005),C=e(5632),J=e(2784),V=e(92228),L=e(6647);e(72027);var W=e(10017),R=e.n(W);e(93586),e(75652),e(34519);var N=e(26390);e(93725),e(93324),e(60242);var z=e(43386),Y=e(64867),j=function(n){return{type:z.i.MINT,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.to,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0),amountToken1:parseFloat(n.amount1)}},x=function(n){return{type:z.i.BURN,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.sender,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0),amountToken1:parseFloat(n.amount1)}},E=function(n){return{type:z.i.SWAP,hash:n.id.split("-")[0],timestamp:n.timestamp,sender:n.from,token0Symbol:n.pair.token0.symbol,token1Symbol:n.pair.token1.symbol,token0Address:n.pair.token0.id,token1Address:n.pair.token1.id,amountUSD:parseFloat(n.amountUSD),amountToken0:parseFloat(n.amount0In)-parseFloat(n.amount0Out),amountToken1:parseFloat(n.amount1In)-parseFloat(n.amount1Out)}},M=function(n){return{date:n.date,volumeUSD:parseFloat(n.dailyVolumeUSD),liquidityUSD:parseFloat(n.totalLiquidityUSD)}},H=function(n){return{date:n.date,volumeUSD:parseFloat(n.dailyVolumeUSD),liquidityUSD:parseFloat(n.reserveUSD)}},G=(r=(0,T.Z)(function(n,t){var e,r,o,a,i,u,s,c,l,d,p,m,f,v,y;return(0,$.__generator)(this,function(D){switch(D.label){case 0:e=[],r=!1,o=0,a=!1,D.label=1;case 1:if(!(!a&&!r))return[3,3];return[4,t(n,o)];case 2:return u=(i=D.sent()).data,s=i.error,o+=1e3,a=(null==u?void 0:u.length)<1e3||o>2e3,r=s,u&&(e=e.concat(u)),[3,1];case 3:if(r||0===e.length)return[2,{error:!0}];for(console.warn(c=R()(e.map(function(n){return[parseInt((n.date/N.Bq).toFixed(0)),n]}))),l=Object.keys(c).map(function(n){return parseInt(n,10)}),m=null!==(p=null==(d=c[l[0]])?void 0:d.date)&&void 0!==p?p:Y.YM[n],v=null!==(f=null==d?void 0:d.liquidityUSD)&&void 0!==f?f:0,y=(0,P.Z)(new Date);m<y-N.Bq;){var k=parseInt(((m+=N.Bq)/N.Bq).toFixed(0),10);Object.keys(c).includes(k.toString())?v=c[k].liquidityUSD:c[k]={date:m,volumeUSD:0,liquidityUSD:v}}return[2,{data:Object.values(c),error:!1}]}})}),function(n,t){return r.apply(this,arguments)}),Q=(o=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D;return(0,$.__generator)(this,function(k){switch(k.label){case 0:r=[],o=!1,a=0,i=!1,k.label=1;case 1:if(!(!i&&!o))return[3,3];return[4,t(n,a,e)];case 2:return s=(u=k.sent()).data,c=u.error,a+=1e3,i=(null==s?void 0:s.length)<1e3||a>2e3,o=c,s&&(r=r.concat(s)),[3,1];case 3:if(o||0===r.length)return[2,{error:!0}];for(console.warn(l=R()(r.map(function(n){return[parseInt((n.date/N.Bq).toFixed(0)),n]}))),d=Object.keys(l).map(function(n){return parseInt(n,10)}),f=null!==(m=null==(p=l[d[0]])?void 0:p.date)&&void 0!==m?m:Y.YM[n],y=null!==(v=null==p?void 0:p.liquidityUSD)&&void 0!==v?v:0,D=(0,P.Z)(new Date);f<D-N.Bq;){var h=parseInt(((f+=N.Bq)/N.Bq).toFixed(0),10);Object.keys(l).includes(h.toString())?y=l[h].liquidityUSD:l[h]={date:f,volumeUSD:0,liquidityUSD:y}}return[2,{data:Object.values(l),error:!1}]}})}),function(n,t,e){return o.apply(this,arguments)});function X(){var n=(0,V.Z)(["\n      query pairDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\n        pairDayDatas(\n          first: 1000\n          skip: $skip\n          where: { pairAddress: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          reserveUSD\n        }\n      }\n    "]);return X=function(){return n},n}var K=(a=(0,T.Z)(function(n,t,e){var r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=(0,L.gql)(X()),[4,(0,Y.rf)(n).request(r,{startTime:Y.YM[n],skip:t,address:e})];case 1:return[2,{data:o.sent().pairDayDatas.map(H),error:!1}];case 2:return console.error("Failed to fetch pool chart data",o.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e){return a.apply(this,arguments)}),nn=(i=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){return[2,Q(n,K,t)]})}),function(n,t){return i.apply(this,arguments)}),nt=e(96670),ne=e(8244),nr=function(n,t,e){var r=n*N.om,o=t*N.om,a=n*N.BY,i=t*N.BY,u=e>0?t*N.BY*N.MV*100/e:0;return{totalFees24h:r,totalFees7d:o,lpFees24h:a,lpFees7d:i,lpApr7d:u!==1/0?u:0}},no=e(2303),na=e(20337),ni=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=tm(),o=JSON.stringify(n),a=JSON.parse(o);return{blocks:(0,no.Z)(["info/blocks/".concat(o),r],function(){return(0,na.z)(a,t,e,r)}).data}},nu=e(27867),ns=e(14966);function nc(){var n=(0,V.Z)(["\n      query topPools($blacklist: [String!]) {\n        pairDayDatas(\n          first: ","\n          ","\n          orderBy: dailyVolumeUSD\n          orderDirection: desc\n        ) {\n          id\n        }\n      }\n    "]);return nc=function(){return n},n}var nl=(u=(0,T.Z)(function(n,t){var e,r,o,a;return(0,$.__generator)(this,function(i){switch(i.label){case 0:r=(e=(0,Y.J5)())?100:30,o="BSC"===n?"where: { dailyTxns_gt: 300, token0_not_in: $blacklist, token1_not_in: $blacklist, date_gt: ".concat(t," }"):"where: { date_gt: ".concat(t,", token0_not_in: $blacklist, token1_not_in: $blacklist, dailyVolumeUSD_gt: 2000 }"),e&&(o="where: { date_gt: ".concat(t,"}")),i.label=1;case 1:return i.trys.push([1,3,,4]),a=(0,L.gql)(nc(),r,o),[4,(0,Y.rf)(n).request(a,{blacklist:Y.z2[n]})];case 2:return[2,i.sent().pairDayDatas.map(function(n){return n.id.split("-")[0]})];case 3:return console.error("Failed to fetch top pools",i.sent()),[2,[]];case 4:return[2]}})}),function(n,t){return u.apply(this,arguments)}),nd=(s=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,nl(n,(0,B.Z)((0,ns.z)(),1)[0])];case 1:return[2,t.sent()]}})}),function(n){return s.apply(this,arguments)});function np(){var n=(0,V.Z)(["\n      query pools {\n        now: ","\n        oneDayAgo: ","\n        twoDaysAgo: ","\n        oneWeekAgo: ","\n        twoWeeksAgo: ","\n      }\n    "]);return np=function(){return n},n}var nm=function(n,t,e){var r='["'.concat(e.join('","'),'"]'),o=(0,Y.J5)()?"volumeOutUSD":"";return"pairs(\n    where: { id_in: ".concat(r," }\n    ").concat(t?"block: {number: ".concat(t,"}"):"","\n    orderBy: trackedReserve").concat(Y.WR[n],"\n    orderDirection: desc\n  ) {\n    id\n    reserve0\n    reserve1\n    reserveUSD\n    volumeUSD\n    ").concat(o,"\n    token0Price\n    token1Price\n    token0 {\n      id\n      symbol\n      name\n    }\n    token1 {\n      id\n      symbol\n      name\n    }\n  }")},nf=(c=(0,T.Z)(function(n,t,e,r,o){var a,i,u=arguments;return(0,$.__generator)(this,function(s){switch(s.label){case 0:a=u.length>5&&void 0!==u[5]?u[5]:"BSC",s.label=1;case 1:return s.trys.push([1,3,,4]),i=(0,L.gql)(np(),nm(a,null,o),nm(a,n,o),nm(a,t,o),nm(a,e,o),nm(a,r,o)),[4,(0,Y.rf)(a).request(i)];case 2:return[2,{data:s.sent(),error:!1}];case 3:return console.error("Failed to fetch pool data",s.sent()),[2,{error:!0}];case 4:return[2]}})}),function(n,t,e,r,o){return c.apply(this,arguments)}),nv=function(n){return n?n.reduce(function(n,t){var e=t.volumeUSD,r=t.reserveUSD,o=t.reserve0,a=t.reserve1,i=t.token0Price,u=t.token1Price,s=t.volumeOutUSD;return n[t.id.toLowerCase()]=(0,nt.Z)((0,A.Z)({},t),{volumeUSD:parseFloat(e),volumeOutUSD:s&&parseFloat(s),reserveUSD:parseFloat(r),reserve0:parseFloat(o),reserve1:parseFloat(a),token0Price:parseFloat(i),token1Price:parseFloat(u)}),n},{}):{}},ny=(l=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m;return(0,$.__generator)(this,function(f){switch(f.label){case 0:return o=(r=(0,B.Z)(null!=n?n:[],4))[0],a=r[1],i=r[2],u=r[3],[4,nf(o.number,a.number,i.number,u.number,e,t)];case 1:return c=nv(null==(s=f.sent().data)?void 0:s.now),l=nv(null==s?void 0:s.oneDayAgo),d=nv(null==s?void 0:s.twoDaysAgo),p=nv(null==s?void 0:s.oneWeekAgo),m=nv(null==s?void 0:s.twoWeeksAgo),[2,e.reduce(function(n,t){var e=c[t],r=l[t],o=d[t],a=p[t],i=m[t],u=(0,B.Z)((0,ne.T)(null==e?void 0:e.volumeUSD,null==r?void 0:r.volumeUSD,null==o?void 0:o.volumeUSD),2),s=u[0],f=u[1],v=(null==e?void 0:e.volumeOutUSD)&&(0,nu.D)(null==e?void 0:e.volumeOutUSD,null==r?void 0:r.volumeOutUSD),y=(null==e?void 0:e.volumeOutUSD)&&(0,nu.D)(null==e?void 0:e.volumeOutUSD,null==a?void 0:a.volumeOutUSD),D=(0,B.Z)((0,ne.T)(null==e?void 0:e.volumeUSD,null==a?void 0:a.volumeUSD,null==i?void 0:i.volumeUSD),2),k=D[0],h=D[1],b=e?e.reserveUSD:0,S=(0,nu.Y)(null==e?void 0:e.reserveUSD,null==r?void 0:r.reserveUSD),w=e?e.reserve0:0,U=e?e.reserve1:0,g=nr(s,k,b),Z=g.totalFees24h,_=g.totalFees7d,q=g.lpFees24h,F=g.lpFees7d,T=g.lpApr7d;return e&&(n[t]={data:{address:t,token0:{address:e.token0.id,name:e.token0.name,symbol:e.token0.symbol},token1:{address:e.token1.id,name:e.token1.name,symbol:e.token1.symbol},token0Price:e.token0Price,token1Price:e.token1Price,volumeUSD:s,volumeUSDChange:f,volumeUSDWeek:k,volumeUSDChangeWeek:h,totalFees24h:Z,totalFees7d:_,lpFees24h:q,lpFees7d:F,lpApr7d:T,liquidityUSD:b,liquidityUSDChange:S,liquidityToken0:w,liquidityToken1:U,volumeOutUSD:v,volumeOutUSDWeek:y}}),n},{})]}})}),function(n,t,e){return l.apply(this,arguments)}),nD=(d=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return[4,nd(t)];case 1:return[2,ny(n,t,e.sent())]}})}),function(n,t){return d.apply(this,arguments)}),nk=e(50930);function nh(){var n=(0,V.Z)(["\n  query poolTransactions($address: ID!) {\n    mints(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      to\n      amount0\n      amount1\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n    swaps(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      from\n      amount0In\n      amount1In\n      amount0Out\n      amount1Out\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n    burns(first: 35, orderBy: timestamp, orderDirection: desc, where: { pair: $address }) {\n      id\n      timestamp\n      sender\n      amount0\n      amount1\n      amountUSD\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n    }\n  }\n"]);return nh=function(){return n},n}var nb=(0,L.gql)(nh()),nS=(p=(0,T.Z)(function(n,t){var e,r,o,a,i;return(0,$.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,(0,Y.rf)(n).request(nb,{address:t})];case 1:return r=(e=u.sent()).mints.map(j),o=e.burns.map(x),a=e.swaps.map(E),[2,{data:(0,nk.Z)(r).concat((0,nk.Z)(o),(0,nk.Z)(a)),error:!1}];case 2:return i=u.sent(),console.error("Failed to fetch transactions for pool ".concat(t),i),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return p.apply(this,arguments)});function nw(){var n=(0,V.Z)(["\n  query overviewCharts($startTime: Int!, $skip: Int!) {\n    pancakeDayDatas(first: 1000, skip: $skip, where: { date_gt: $startTime }, orderBy: date, orderDirection: asc) {\n      date\n      dailyVolumeUSD\n      totalLiquidityUSD\n    }\n  }\n"]);return nw=function(){return n},n}var nU=(0,L.gql)(nw()),ng=(m=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,Y.rf)(n).request(nU,{startTime:Y.YM[n],skip:t})];case 1:return[2,{data:e.sent().pancakeDayDatas.map(M),error:!1}];case 2:return console.error("Failed to fetch overview chart data",e.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return m.apply(this,arguments)}),nZ=(f=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,G(n,ng)];case 1:return[2,t.sent().data]}})}),function(n){return f.apply(this,arguments)});function n_(){var n=(0,V.Z)(["query overview {\n      ","(\n        ","\n        first: 1) {\n        totalTransactions\n        totalVolumeUSD\n        totalLiquidityUSD\n      }\n    }"]);return n_=function(){return n},n}var nq=(v=(0,T.Z)(function(n,t){var e,r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:e=(0,Y.J5)()?"factories":"pancakeFactories",o.label=1;case 1:return o.trys.push([1,3,,4]),r=(0,L.gql)(n_(),e,t?"block: { number: ".concat(t,"}"):""),[4,(0,Y.rf)(n).request(r)];case 2:return[2,{data:o.sent(),error:!1}];case 3:return console.error("Failed to fetch info overview",o.sent()),[2,{data:null,error:!0}];case 4:return[2]}})}),function(n,t){return v.apply(this,arguments)}),nF=function(n){return n?{totalTransactions:parseFloat(n.totalTransactions),totalVolumeUSD:parseFloat(n.totalVolumeUSD),totalLiquidityUSD:parseFloat(n.totalLiquidityUSD)}:null},nT=(y=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m,f,v,y,D,k,h,b,S;return(0,$.__generator)(this,function(w){switch(w.label){case 0:return[4,Promise.all([nq(n),nq(n,null!==(i=null==t?void 0:t.number)&&void 0!==i?i:void 0),nq(n,null!==(u=null==e?void 0:e.number)&&void 0!==u?u:void 0)])];case 1:return c=(s=B.Z.apply(void 0,[w.sent(),3]))[0].data,l=s[1].data,d=s[2].data,c.factories&&c.factories.length>0&&(c.pancakeFactories=c.factories),l.factories&&l.factories.length>0&&(l.pancakeFactories=l.factories),d.factories&&d.factories.length>0&&(d.pancakeFactories=d.factories),p=nF(null==c?void 0:null===(r=c.pancakeFactories)||void 0===r?void 0:r[0]),m=nF(null==l?void 0:null===(o=l.pancakeFactories)||void 0===o?void 0:o[0]),f=nF(null==d?void 0:null===(a=d.pancakeFactories)||void 0===a?void 0:a[0]),y=(v=(0,B.Z)((0,ne.T)(p.totalVolumeUSD,m.totalVolumeUSD,f.totalVolumeUSD),2))[0],D=v[1],k=(0,nu.Y)(p.totalLiquidityUSD,m.totalLiquidityUSD),b=(h=(0,B.Z)((0,ne.T)(p.totalTransactions,m.totalTransactions,f.totalTransactions),2))[0],S=h[1],[2,{volumeUSD:y,volumeUSDChange:"number"==typeof D?D:0,liquidityUSD:p.totalLiquidityUSD,liquidityUSDChange:k,txCount:b,txCountChange:S}]}})}),function(n,t,e){return y.apply(this,arguments)});function nA(){var n=(0,V.Z)(["\n  query overviewTransactions {\n    mints: mints(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      to\n      amount0\n      amount1\n      amountUSD\n    }\n    swaps: swaps(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      from\n      amount0In\n      amount1In\n      amount0Out\n      amount1Out\n      amountUSD\n    }\n    burns: burns(first: 33, orderBy: timestamp, orderDirection: desc) {\n      id\n      timestamp\n      pair {\n        token0 {\n          id\n          symbol\n        }\n        token1 {\n          id\n          symbol\n        }\n      }\n      sender\n      amount0\n      amount1\n      amountUSD\n    }\n  }\n"]);return nA=function(){return n},n}var nB=(0,L.gql)(nA()),n$=(D=(0,T.Z)(function(n){var t,e,r,o;return(0,$.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,Y.rf)(n).request(nB)];case 1:if(!(t=a.sent()))return[2,void 0];return e=t.mints.map(j),r=t.burns.map(x),o=t.swaps.map(E),[2,(0,nk.Z)(e).concat((0,nk.Z)(r),(0,nk.Z)(o)).sort(function(n,t){return parseInt(t.timestamp,10)-parseInt(n.timestamp,10)})];case 2:return a.sent(),[2,void 0];case 3:return[2]}})}),function(n){return D.apply(this,arguments)});function nP(){var n=(0,V.Z)(["\n      query tokenDayDatas($startTime: Int!, $skip: Int!, $address: String!) {\n        tokenDayDatas(\n          first: 1000\n          skip: $skip\n          where: { token: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          totalLiquidityUSD\n        }\n      }\n    "]);return nP=function(){return n},n}var nI=(k=(0,T.Z)(function(n,t,e){var r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=(0,L.gql)(nP()),[4,(0,Y.rf)(n).request(r,{startTime:Y.YM[n],skip:t,address:e})];case 1:return[2,{data:o.sent().tokenDayDatas.map(M),error:!1}];case 2:return console.error("Failed to fetch token chart data",o.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e){return k.apply(this,arguments)}),nO=(h=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){return[2,Q(n,nI,t)]})}),function(n,t){return h.apply(this,arguments)});function nC(){var n=(0,V.Z)(["\n  query poolsForToken($address: String!, $blacklist: [String!]) {\n    asToken0: pairs(\n      first: 15\n      orderBy: trackedReserve","\n      orderDirection: desc\n      where: { totalTransactions_gt: ",", token0: $address, token1_not_in: $blacklist }\n    ) {\n      id\n    }\n    asToken1: pairs(\n      first: 15\n      orderBy: trackedReserve","\n      orderDirection: desc\n      where: { totalTransactions_gt: ",", token1: $address, token0_not_in: $blacklist }\n    ) {\n      id\n    }\n  }\n"]);return nC=function(){return n},n}var nJ=function(n){var t="ETH"===n?1:100;return(0,L.gql)(nC(),Y.WR[n],t,Y.WR[n],t)},nV=(b=(0,T.Z)(function(n,t){var e,r;return(0,$.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,Y.rf)(n).request(nJ(n),{address:t,blacklist:N.tE})];case 1:return[2,{error:!1,addresses:(e=o.sent()).asToken0.concat(e.asToken1).map(function(n){return n.id}).map(function(n){return n.toLowerCase()})}];case 2:return r=o.sent(),console.error("Failed to fetch pools for token ".concat(t),r),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return b.apply(this,arguments)}),nL=e(34498),nW=e.n(nL),nR=e(70050);function nN(){var n=(0,V.Z)(["\n    query tokenPriceData {\n      ","\n    }\n  "]);return nN=function(){return n},n}var nz=function(n){return(0,L.gql)(nN(),n)},nY=(S=(0,T.Z)(function(n,t,e,r){var o,a,i,u,s,c,l,d,p,m,f,v,y,D;return(0,$.__generator)(this,function(k){switch(k.label){case 0:for(o=(0,P.Z)(new Date),a=[],i=r;i<=o;)a.push(i),i+=e;k.label=1;case 1:return k.trys.push([1,4,,5]),[4,(0,na.z)(a,"asc",500,n)];case 2:if((c=null!==(s=null==(u=k.sent())?void 0:u.length)&&void 0!==s?s:0)>0&&"BSC"===n&&!(0,Y.J5)()&&(l=u[c-1],u[c-1]={timestamp:l.timestamp,number:l.number-32}),!u||0===c)return console.error("Error fetching blocks for timestamps",a),[2,{error:!1}];return[4,(0,nR.L)(nz,u.map(function(e){return"\n      t".concat(e.timestamp,':token(id:"').concat(t,'", block: { number: ').concat(e.number," }) {\n        derived").concat(Y.WR[n],"\n      }\n      b").concat(e.timestamp,': bundle(id:"1", block: { number: ').concat(e.number," }) {\n        ").concat(Y.WR[n].toLowerCase(),"Price\n      }\n    ")}),Y.Ho[n],200)];case 3:if(console.warn("fetchTokenPriceData",{chainName:n,prices:d=k.sent()}),!d)return console.error("Price data failed to load"),[2,{error:!1}];for(p=[],m=Y.WR[n],Object.keys(d).forEach(function(n){var t,e=n.split("t")[1];e&&p.push({timestamp:e,derivedBNB:(null===(t=d[n])||void 0===t?void 0:t["derived".concat(m)])?parseFloat(d[n]["derived".concat(m)]):0,priceUSD:0})}),console.warn("pricesPart1",p),Object.keys(d).forEach(function(n){var t=n.split("b")[1];if(t){var e=p.findIndex(function(n){return n.timestamp===t});if(e>=0){var r,o,a=p[e].derivedBNB;p[e].priceUSD=parseFloat(null!==(o=null===(r=d[n])||void 0===r?void 0:r["".concat(m.toLowerCase(),"Price")])&&void 0!==o?o:0)*a}}}),f=nW()(p,function(n){return parseInt(n.timestamp,10)}),v=[],y=0;y<f.length-1;y++)v.push({time:parseFloat(f[y].timestamp),open:f[y].priceUSD,close:f[y+1].priceUSD,high:f[y+1].priceUSD,low:f[y].priceUSD});return[2,{data:v,error:!1}];case 4:return D=k.sent(),console.error("Failed to fetch price data for token ".concat(t),D),[2,{error:!0}];case 5:return[2]}})}),function(n,t,e,r){return S.apply(this,arguments)}),nj=e(26139),nx=e.n(nj);function nE(){var n=(0,V.Z)(["\n      query topTokens($blacklist: [ID!]) {\n        tokenDayDatas(\n          first: ","\n          ","\n          orderBy: dailyVolumeUSD\n          orderDirection: desc\n        ) {\n          id\n        }\n      }\n    "]);return nE=function(){return n},n}var nM=(w=(0,T.Z)(function(n,t){var e,r,o,a,i;return(0,$.__generator)(this,function(u){switch(u.label){case 0:e="ETH"===n?"where: { date_gt: ".concat(t,", token_not_in: $blacklist, dailyVolumeUSD_gt:2000 }"):(0,Y.J5)()?"":"where: { dailyTxns_gt: 300, id_not_in: $blacklist, date_gt: ".concat(t,"}"),r=50,u.label=1;case 1:return u.trys.push([1,3,,4]),o=(0,L.gql)(nE(),r,e),[4,(0,Y.rf)(n).request(o,{blacklist:Y.z2[n]})];case 2:return a=u.sent(),[2,nx()(a.tokenDayDatas.map(function(n){return n.id.split("-")[0]}),Y.tO[n])];case 3:return i=u.sent(),console.warn("fetchTopTokens",{chainName:n,timestamp24hAgo:t}),console.error("Failed to fetch top tokens",i),[2,[]];case 4:return[2]}})}),function(n,t){return w.apply(this,arguments)}),nH=(U=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){switch(t.label){case 0:return[4,nM(n,(0,B.Z)((0,ns.z)(),1)[0])];case 1:return[2,t.sent()]}})}),function(n){return U.apply(this,arguments)});function nG(){var n=(0,V.Z)(["\n      query tokens {\n        now: ","\n        oneDayAgo: ","\n        twoDaysAgo: ","\n        oneWeekAgo: ","\n        twoWeeksAgo: ","\n      }\n    "]);return nG=function(){return n},n}var nQ=function(n,t,e){var r='["'.concat(e.join('","'),'"]');return"tokens(\n      where: {id_in: ".concat(r,"}\n      ").concat(t?"block: {number: ".concat(t,"}"):"","\n      orderBy: tradeVolumeUSD\n      orderDirection: desc\n    ) {\n      id\n      symbol\n      name\n      decimals\n      derived").concat(Y.WR[n],"\n      derivedUSD\n      tradeVolumeUSD\n      totalTransactions\n      totalLiquidity\n    }\n  ")},nX=(g=(0,T.Z)(function(n,t,e,r,o,a){var i;return(0,$.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),i=(0,L.gql)(nG(),nQ(n,null,a),nQ(n,t,a),nQ(n,e,a),nQ(n,r,a),nQ(n,o,a)),[4,(0,Y.rf)(n).request(i)];case 1:return[2,{data:u.sent(),error:!1}];case 2:return console.error("Failed to fetch token data",u.sent()),[2,{error:!0}];case 3:return[2]}})}),function(n,t,e,r,o,a){return g.apply(this,arguments)}),nK=function(n){return n?n.reduce(function(n,t){var e=t.derivedBNB,r=t.derivedUSD,o=t.tradeVolumeUSD,a=t.totalTransactions,i=t.totalLiquidity,u=t.derivedETH,s=t.decimals;return n[t.id.toLowerCase()]=(0,nt.Z)((0,A.Z)({},t),{derivedBNB:e?0:parseFloat(e),derivedETH:u?0:parseFloat(u),derivedUSD:parseFloat(r),tradeVolumeUSD:parseFloat(o),totalTransactions:parseFloat(a),totalLiquidity:parseFloat(i),decimals:parseInt(s)}),n},{}):{}},n0=(Z=(0,T.Z)(function(n,t,e){var r,o,a,i,u,s,c,l,d,p,m;return(0,$.__generator)(this,function(f){switch(f.label){case 0:return o=(r=(0,B.Z)(null!=t?t:[],4))[0],a=r[1],i=r[2],u=r[3],[4,nX(n,o.number,a.number,i.number,u.number,e)];case 1:return c=nK(null==(s=f.sent().data)?void 0:s.now),l=nK(null==s?void 0:s.oneDayAgo),d=nK(null==s?void 0:s.twoDaysAgo),p=nK(null==s?void 0:s.oneWeekAgo),m=nK(null==s?void 0:s.twoWeeksAgo),[2,e.reduce(function(n,t){var e=c[t],r=l[t],o=d[t],a=p[t],i=m[t],u=(0,B.Z)((0,ne.T)(null==e?void 0:e.tradeVolumeUSD,null==r?void 0:r.tradeVolumeUSD,null==o?void 0:o.tradeVolumeUSD),2),s=u[0],f=u[1],v=(0,B.Z)((0,ne.T)(null==e?void 0:e.tradeVolumeUSD,null==a?void 0:a.tradeVolumeUSD,null==i?void 0:i.tradeVolumeUSD),1)[0],y=e?e.totalLiquidity*e.derivedUSD:0,D=r?r.totalLiquidity*r.derivedUSD:0,k=(0,nu.Y)(y,D),h=e?e.totalLiquidity:0,b=e?e.derivedUSD:0,S=e?e.decimals:0,w=r?r.derivedUSD:0,U=a?a.derivedUSD:0,g=(0,nu.Y)(b,w),Z=(0,nu.Y)(b,U),_=(0,nu.D)(null==e?void 0:e.totalTransactions,null==r?void 0:r.totalTransactions);return n[t]={data:{exists:!!e,address:t,name:e?e.name:"",symbol:e?e.symbol:"",volumeUSD:s,volumeUSDChange:f,volumeUSDWeek:v,txCount:_,liquidityUSD:y,liquidityUSDChange:k,liquidityToken:h,priceUSD:b,priceUSDChange:g,priceUSDChangeWeek:Z,decimals:S}},n},{})]}})}),function(n,t,e){return Z.apply(this,arguments)}),n1=(_=(0,T.Z)(function(n,t){return(0,$.__generator)(this,function(e){switch(e.label){case 0:return[4,nH(n)];case 1:return[4,n0(n,t,e.sent())];case 2:return[2,e.sent()]}})}),function(n,t){return _.apply(this,arguments)});function n2(){var n=(0,V.Z)(["\n    query tokenTransactions($address: String!) {\n      mintsAs0: mints(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        to\n        amount0\n        amount1\n        amountUSD\n      }\n      mintsAs1: mints(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        to\n        amount0\n        amount1\n        amountUSD\n      }\n      swapsAs0: swaps(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        from\n        amount0In\n        amount1In\n        amount0Out\n        amount1Out\n        amountUSD\n      }\n      swapsAs1: swaps(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        from\n        amount0In\n        amount1In\n        amount0Out\n        amount1Out\n        amountUSD\n      }\n      burnsAs0: burns(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        sender\n        amount0\n        amount1\n        amountUSD\n      }\n      burnsAs1: burns(first: 10, orderBy: timestamp, orderDirection: desc, where: { "," }) {\n        id\n        timestamp\n        pair {\n          token0 {\n            id\n            symbol\n          }\n          token1 {\n            id\n            symbol\n          }\n        }\n        sender\n        amount0\n        amount1\n        amountUSD\n      }\n    }\n  "]);return n2=function(){return n},n}var n3=function(){var n=(0,Y.J5)(),t=n?"pair_: {token0: $address}":"token0: $address",e=n?"pair_: {token1: $address}":"token1: $address";return(0,L.gql)(n2(),t,e,t,e,t,e)},n4=(q=(0,T.Z)(function(n,t){var e,r,o,a,i,u,s,c;return(0,$.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,Y.rf)(n).request(n3(),{address:t})];case 1:return r=(e=l.sent()).mintsAs0.map(j),o=e.mintsAs1.map(j),a=e.burnsAs0.map(x),i=e.burnsAs1.map(x),u=e.swapsAs0.map(E),s=e.swapsAs1.map(E),[2,{data:(0,nk.Z)(r).concat((0,nk.Z)(o),(0,nk.Z)(a),(0,nk.Z)(i),(0,nk.Z)(u),(0,nk.Z)(s)),error:!1}];case 2:return c=l.sent(),console.error("Failed to fetch transactions for token ".concat(t),c),[2,{error:!0}];case 3:return[2]}})}),function(n,t){return q.apply(this,arguments)}),n5=e(84205),n7={errorRetryCount:3,errorRetryInterval:3e3},n8=(0,A.Z)({refreshInterval:15e3},n7),n6=function(){var n=tm(),t=(0,B.Z)((0,ns.z)(),2),e=ni([t[0],t[1]]).blocks,r=(0,B.Z)(null!=e?e:[],2),o=r[0],a=r[1],i=(0,Y.J5)()?"stableSwap":"swap",u=(0,no.Z)(n&&o&&a?["info/protocol/updateProtocolData/".concat(i),n]:null,function(){return nT(n,o,a)},n7).data;return null!=u?u:void 0},n9=function(){var n=tm(),t=(0,Y.J5)()?"stableSwap":"swap",e=(0,no.Z)(["info/protocol/updateProtocolChartData/".concat(t),n],function(){return nZ(n)},n7).data;return null!=e?e:void 0},tn=function(){var n=tm(),t=(0,Y.J5)()?"stableSwap":"swap",e=(0,no.Z)(["info/protocol/updateProtocolTransactionsData/".concat(t),n],function(){return n$(n)},n8).data;return null!=e?e:void 0},tt=function(){var n=tm(),t=(0,B.Z)((0,ns.z)(),4),e=ni([t[0],t[1],t[2],t[3]]).blocks,r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(e&&n&&["info/pools/data/".concat(r),n],function(){return nD(e,n)},n7).data;return null!=o?o:{}},te=function(n){var t=n.join(""),e=tm(),r=(0,B.Z)((0,ns.z)(),4),o=ni([r[0],r[1],r[2],r[3]]).blocks,a=(0,Y.J5)()?"stableSwap":"swap",i=(0,no.Z)(o&&e&&["info/pool/data/".concat(t,"/").concat(a),e],function(){return ny(o,e,n)},n8).data;return n.map(function(n){var t;return null==i?void 0:null===(t=i[n])||void 0===t?void 0:t.data}).filter(function(n){return n})},tr=function(n){var t,e=tm(),r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(["info/pool/chartData/".concat(n,"/").concat(r),e],function(){return nn(e,n)},n7).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},to=function(n){var t,e=tm(),r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(["info/pool/transactionsData/".concat(n,"/").concat(r),e],function(){return nS(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},ta=function(){var n=tm(),t=(0,B.Z)((0,ns.z)(),4),e=ni([t[0],t[1],t[2],t[3]]).blocks,r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(e&&n&&["info/token/data/".concat(r),n],function(){return n1(n,e)},n7).data;return null!=o?o:{}},ti=function(n,t,e){for(var r=Math.ceil(n.length/50),o=[],a=0;a<r;a++)o.push(n.slice(50*a,(a+1)*50));return Promise.all(o.map(function(n){return n0(t,e,n)}))},tu=function(n){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=n.join(""),r=tm(),o=(0,B.Z)((0,ns.z)(),4),a=ni([o[0],o[1],o[2],o[3]]).blocks,i=(0,Y.J5)()?"stableSwap":"swap",u=(0,no.Z)(a&&r&&["info/token/data/".concat(e,"/").concat(i),r],function(){return ti(n,r,a)},t?n8:n7),s=u.data,c=u.isLoading,l=(0,J.useMemo)(function(){return s&&s.length>0?s.reduce(function(n,t){return(0,A.Z)({},n,t)},{}):{}},[s]),d=(0,J.useMemo)(function(){if(n||!l)return n.map(function(n){var t;return null==l?void 0:null===(t=l[n])||void 0===t?void 0:t.data}).filter(function(n){return n&&n.exists})},[n,l]);return c?[]:null!=d?d:void 0},ts=function(n){var t;return null!==(t=tu([n]).find(function(t){return t.address===n}))&&void 0!==t?t:void 0},tc=function(n){var t,e=tm(),r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(["info/token/poolAddress/".concat(n,"/").concat(r),e],function(){return nV(e,n)},n7).data;return null!==(t=null==o?void 0:o.addresses)&&void 0!==t?t:void 0},tl=function(n){var t,e=tm(),r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(n&&e&&["info/token/chartData/".concat(n,"/").concat(r),e],function(){return nO(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},td=function(n,t,e){var r,o=1e3*(0,P.Z)(new Date),a=(0,P.Z)((0,I.Z)((0,O.Z)(o,e))),i=tm(),u=(0,Y.J5)()?"stableSwap":"swap",s=(0,no.Z)(["info/token/priceData/".concat(n,"/").concat(u),i],function(){return nY(i,n,t,a)},n8).data;return null!==(r=null==s?void 0:s.data)&&void 0!==r?r:void 0},tp=function(n){var t,e=tm(),r=(0,Y.J5)()?"stableSwap":"swap",o=(0,no.Z)(["info/token/transactionsData/".concat(n,"/").concat(r),e],function(){return n4(e,n)},n8).data;return null!==(t=null==o?void 0:o.data)&&void 0!==t?t:void 0},tm=function(){var n=(0,C.useRouter)(),t=n.pathname,e=n.query,r=(0,J.useCallback)(function(){return t.includes("eth")||"eth"===e.chain?"ETH":"BSC"},[t,e]),o=(0,B.Z)((0,J.useState)(r()),2),a=o[0],i=o[1],u=(0,J.useMemo)(function(){return a},[a]);return(0,J.useEffect)(function(){i(r())},[r]),u},tf=(F=(0,T.Z)(function(n){return(0,$.__generator)(this,function(t){return[2,Promise.all(n.map(function(n){return(0,n5.J)(n)}))]})}),function(n){return F.apply(this,arguments)}),tv=function(n){var t=(0,Y.J5)(),e=tm(),r=(0,no.Z)(t&&(null==n?void 0:n.length)>0&&["info/pool/stableAPRs/Addresses/",e],function(){return tf(n)},n7).data,o={};return null==r||r.forEach(function(t,e){o[n[e]]=null==t?void 0:t.toNumber()}),t?o:{}},ty=function(){var n=(0,C.useRouter)().query.chainName;return n?"/".concat(n):""},tD=function(){return(0,Y.J5)()?"?type=stableSwap":""}},43386:function(n,t,e){var r,o;e.d(t,{i:function(){return r}}),(o=r||(r={}))[o.SWAP=0]="SWAP",o[o.MINT=1]="MINT",o[o.BURN=2]="BURN"},84205:function(n,t,e){e.d(t,{J:function(){return D}});var r,o=e(98788),a=e(87394),i=e(92228),u=e(45680),s=e(6391),c=e.n(s),l=e(6647),d=e(53982),p=e.n(d),m=e(14966),f=e(20337),v=e(74958);function y(){var n=(0,i.Z)(["\n        query virtualPriceStableSwap($stableSwapAddress: String, $blockDayAgo: Int!) {\n          virtualPriceAtLatestBlock: pair(id: $stableSwapAddress) {\n            virtualPrice\n          }\n          virtualPriceOneDayAgo: pair(id: $stableSwapAddress, block: { number: $blockDayAgo }) {\n            virtualPrice\n          }\n        }\n      "]);return y=function(){return n},n}var D=(r=(0,o.Z)(function(n){var t,e,r,o,i,s,d,D,k,h;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),t=(0,a.Z)((0,m.z)(),3)[2],[4,(0,f.z)([t])];case 1:return e=a.Z.apply(void 0,[u.sent(),1])[0],[4,v.Wt.request((0,l.gql)(y()),{stableSwapAddress:p()(n),blockDayAgo:e.number})];case 2:if(o=(r=u.sent()).virtualPriceAtLatestBlock,i=r.virtualPriceOneDayAgo,s=null==o?void 0:o.virtualPrice,d=null==i?void 0:i.virtualPrice,D=new(c())(s),k=new(c())(d),(h=D.minus(k).div(D).plus(1).pow(52).minus(1).times(100)).isFinite()&&h.isGreaterThan(0))return[2,h];return[2,new(c())(0)];case 3:return console.error(u.sent(),"[LP APR Update] getAprsForStableFarm error"),[3,4];case 4:return[2,new(c())("0")]}})}),function(n){return r.apply(this,arguments)})},8244:function(n,t,e){e.d(t,{T:function(){return o}});var r=e(27867),o=function(n,t,e){var o=(0,r.D)(n,t),a=(0,r.D)(t,e),i=(0,r.Y)(o,a);return[o,i]}},14966:function(n,t,e){e.d(t,{z:function(){return u}});var r=e(28401),o=e(18717),a=e(7069),i=e(85899),u=function(){var n=1e3*(0,r.Z)(new Date);return[(0,r.Z)((0,o.Z)((0,a.Z)(n,1))),(0,r.Z)((0,o.Z)((0,a.Z)(n,2))),(0,r.Z)((0,o.Z)((0,i.Z)(n,1))),(0,r.Z)((0,o.Z)((0,i.Z)(n,2)))]}},27867:function(n,t,e){e.d(t,{D:function(){return r},Y:function(){return o}});var r=function(n,t){return n&&t?n-t:n||0},o=function(n,t){return n&&t?(n-t)/t*100:0}}}]);
//# sourceMappingURL=9074-4864bce2a654db04.js.map